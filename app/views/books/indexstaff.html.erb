<div class="container">

<h1>Book Management</h1>
<select id="dropdown1">
  <option value="0,asc">Book : A-Z</option>
  <option value="0,desc">Book : Z-A</option>
  <option value="6,asc">Borrow fee : Low To High</option>
  <option value="6,desc">Borrow fee : High To Low</option>
  <option value="3,desc">Newest</option>
  <option value="3,asc">Oldest</option>
</select>
  <table id="example" class="table">
    <thead>
      <th>Name</th>
      <th>Description</th>
      <th>Author</th>
      <th>Publish an article</th>
      <th>Published date</th>
      <th>Publisher</th>
      <th>Borrow fee</th>
      <th>Quantity</th>
      <th>Quantity in stock</th>
      <th>Show</th>
      <th>Edit</th>
      <th>Delete</th>
    </thead>
   
  <tbody>
      <% @books.each do |book| %>
      <tr>
        <td><%= book.name %></td>
        <td><%= book.description %></td>
        <td>
          <% book.author_books.each do |author_book|%>
          <li>
          <%= author_book.author.author_name%>
          </li>
          <%end%>
        </td>
        <td><%= book.created_at%></td>
        <td><%= book.published_date %></td>
        <td><%= Publisher.find(book.publisher_id).publisher_name if book.publisher_id %></td>
        <td><%= book.borrow_fee %></td>
        <td><%= book.quantity %></td>
        <td><%= book.quantity_in_stock %></td>
        <td><%= link_to 'Show', book %></td>
        <% if user_signed_in? %>
        <td><%= link_to 'Edit', edit_book_path(book) %></td>
        <td><%= link_to 'Destroy', book, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <% end %>
      
      </tr>
      <% end %>
  </tbody>
</table>
<% if user_signed_in? %>
 <%= link_to 'New book',new_book_path%>
<%end%>
<div class="page">
  <%= will_paginate @books%>
</div>
</div>
<script type="text/javascript">
 var table = $('#example').DataTable({"bLengthChange": false,"bPaginate": false});

$('#dropdown1').on('change', function () {
        table.order([(this.value).split(",")]).draw();
});

</script>